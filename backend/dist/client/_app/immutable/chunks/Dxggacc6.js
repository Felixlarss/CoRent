import{a5 as b,a6 as x,f as E,a7 as m,x as y,L as o,a8 as g,a9 as w,aa as A,_ as h}from"./Aicq15hJ.js";function q(e,f,r=f){var d=new WeakSet;b(e,"input",async l=>{var v=l?e.defaultValue:e.value;if(v=i(e)?u(v):v,r(v),o!==null&&d.add(o),await x(),v!==(v=f())){var c=e.selectionStart,s=e.selectionEnd,t=e.value.length;if(e.value=v??"",s!==null){var a=e.value.length;c===s&&s===t&&a>t?(e.selectionStart=a,e.selectionEnd=a):(e.selectionStart=c,e.selectionEnd=Math.min(s,a))}}}),(y&&e.defaultValue!==e.value||E(f)==null&&e.value)&&(r(i(e)?u(e.value):e.value),o!==null&&d.add(o)),m(()=>{var l=f();if(e===document.activeElement){var v=g??o;if(d.has(v))return}i(e)&&l===u(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}const n=new Set;function C(e,f,r,d,l=d){var v=r.getAttribute("type")==="checkbox",c=e;let s=!1;if(f!==null)for(var t of f)c=c[t]??=[];c.push(r),b(r,"change",()=>{var a=r.__value;v&&(a=k(c,a,r.checked)),l(a)},()=>l(v?[]:null)),m(()=>{var a=d();if(y&&r.defaultChecked!==r.checked){s=!0;return}v?(a=a||[],r.checked=a.includes(r.__value)):r.checked=w(r.__value,a)}),A(()=>{var a=c.indexOf(r);a!==-1&&c.splice(a,1)}),n.has(c)||(n.add(c),h(()=>{c.sort((a,_)=>a.compareDocumentPosition(_)===4?-1:1),n.delete(c)})),h(()=>{if(s){var a;if(v)a=k(c,a,r.checked);else{var _=c.find(S=>S.checked);a=_?.__value}l(a)}})}function k(e,f,r){for(var d=new Set,l=0;l<e.length;l+=1)e[l].checked&&d.add(e[l].__value);return r||d.delete(f),Array.from(d)}function i(e){var f=e.type;return f==="number"||f==="range"}function u(e){return e===""?null:+e}export{C as a,q as b};
